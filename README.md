# Практическая работа спринт 8

## Задание 1 - PKCE

Запустить приложение:

```shell
docker-compose up
```

Для упрощения отладки с помощью Proxyman (или любого другого прокси) вместо localhost используется localhost.proxyman.io

Открыть клиентское приложение:
http://localhost.proxyman.io:3000/

Залогиниться:

- `user1` / `password123`

Чтобы разлогиниться есть кнопка Logout в состоянии авторизованного юзера.

Открыть админку keycloak:
http://localhost.proxyman.io:8080/

Запустив proxyman можно подтвердить что авторизация происходит с помощью PKCE.
Если же закомментировать App.keycloakInitOptions.pkceMethod, то будет получена ошибка клиентского приложения, так как
для Keycloak включено обязательное использование PKCE. 

## Заметки

### npm start и кастомный домен

Если запускать приложение локально с помощью `npm start`, то работать будет только с доменом localhost. 
Если же использовать http://localhost.proxyman.io:3000/ для проверки трафика - будет происходить постоянный редирект.
Поэтому для тестов локально лучше делать комбинацию:
```shell
npm run build
serve -s build
```

### iframe keycloak

Почему-то с включенным `checkLoginIframe` (он по умолчанию включен) инициализация не происходит вообще.
